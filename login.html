<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar Sesión - Sistema</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Dependencies: React, ReactDOM, Babel, and Lucide Icons -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .pin-dot {
            transition: all 0.2s ease-in-out;
        }
        .keypad-btn {
            transition: all 0.1s ease-in-out;
        }
        .keypad-btn:active {
            transform: scale(0.95);
            background-color: #4b5563; /* bg-gray-600 */
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        window.onload = function() {
            const { useState, useEffect, createElement } = React;

            // Helper to render Lucide icons
            const Icon = ({ name, ...props }) => {
                if (typeof lucide === 'undefined' || !lucide[name]) {
                    return <span style={{ display: 'inline-block', width: '1em', height: '1em' }}></span>;
                }
                return createElement(lucide[name], props);
            };

            // --- Main Login Screen Component ---
            function LoginScreen() {
                const [pin, setPin] = useState('');
                const [error, setError] = useState('');
                const [success, setSuccess] = useState(false);
                const PIN_LENGTH = 6;
                const CORRECT_PIN = '1234'; // Demo PIN

                // Handle number/key presses
                const handleKeyPress = (key) => {
                    if (success) return;
                    setError('');
                    if (pin.length < PIN_LENGTH) {
                        setPin(pin + key);
                    }
                };
                
                // Handle backspace
                const handleDelete = () => {
                    if (success) return;
                    setError('');
                    setPin(pin.slice(0, -1));
                };

                // Handle PIN submission
                const handleSubmit = () => {
                    if (pin === CORRECT_PIN) {
                        setError('');
                        setSuccess(true);
                        // Here you would typically redirect the user
                        // For demo, we'll just show a success message
                        setTimeout(() => {
                           // Reset for another try
                           setPin('');
                           setSuccess(false);
                        }, 2000);
                    } else {
                        setError('Código incorrecto. Inténtalo de nuevo.');
                        setPin(''); // Clear PIN on error
                    }
                };
                
                // Automatically submit when PIN is full length
                useEffect(() => {
                    if (pin.length === PIN_LENGTH) {
                        handleSubmit();
                    }
                }, [pin]);


                const PinDots = () => (
                    <div className="flex justify-center items-center space-x-3 mb-8">
                        {[...Array(PIN_LENGTH)].map((_, i) => (
                            <div
                                key={i}
                                className={`pin-dot w-5 h-5 rounded-full border-2 ${
                                    i < pin.length ? 'bg-cyan-400 border-cyan-400' : 'border-gray-500'
                                } ${error ? '!border-red-500 !bg-transparent' : ''} ${success ? '!border-green-500 !bg-green-500' : ''}`}
                            ></div>
                        ))}
                    </div>
                );

                const Keypad = () => {
                    const keys = ['1', '2', '3', '4', '5', '6', '7', '8', '9'];
                    return (
                        <div className="grid grid-cols-3 gap-4">
                            {keys.map(key => (
                                <button key={key} onClick={() => handleKeyPress(key)} className="keypad-btn text-3xl font-bold bg-gray-800/50 hover:bg-gray-700/70 rounded-full h-20 w-20 flex items-center justify-center text-white">
                                    {key}
                                </button>
                            ))}
                            <div className="flex items-center justify-center">
                                <button onClick={handleDelete} className="keypad-btn bg-gray-800/50 hover:bg-gray-700/70 rounded-full h-20 w-20 flex items-center justify-center text-white">
                                    <Icon name="Delete" className="w-8 h-8"/>
                                </button>
                            </div>
                            <div className="flex items-center justify-center">
                                <button onClick={() => handleKeyPress('0')} className="keypad-btn text-3xl font-bold bg-gray-800/50 hover:bg-gray-700/70 rounded-full h-20 w-20 flex items-center justify-center text-white">
                                    0
                                </button>
                            </div>
                            <div className="flex items-center justify-center">
                                <button onClick={handleSubmit} className="keypad-btn bg-cyan-600/80 hover:bg-cyan-500/80 rounded-full h-20 w-20 flex items-center justify-center text-white">
                                    <Icon name="ChevronRight" className="w-10 h-10"/>
                                </button>
                            </div>
                        </div>
                    );
                };

                return (
                    <div className="relative min-h-screen flex items-center justify-center p-4 bg-gray-900 text-white">
                        {/* Background Image */}
                        <div 
                            className="absolute inset-0 w-full h-full bg-cover bg-center z-0" 
                            style={{ backgroundImage: "url('https://images.unsplash.com/photo-1572116469696-31de0f17cc34?q=80&w=2070&auto=format&fit=crop')", filter: 'blur(8px) brightness(0.4)'}}
                        ></div>

                        {/* Login Box */}
                        <div className="relative z-10 w-full max-w-sm mx-auto bg-gray-900/60 backdrop-blur-md p-8 rounded-2xl shadow-2xl text-center">
                            <div className="mb-6">
                                <Icon name="UtensilsCrossed" className="h-12 w-12 mx-auto text-cyan-400" />
                                <h1 className="text-2xl font-bold text-white mt-4 tracking-wider">PIKA BAR</h1>
                            </div>
                            
                            <h2 className="text-lg font-semibold text-gray-300 mb-4">INTRODUCÍ EL CÓDIGO ASIGNADO</h2>

                            <PinDots />

                            <Keypad />
                            
                            <div className="h-6 mt-6 text-sm">
                                {error && <p className="text-red-400 font-medium">{error}</p>}
                                {success && <p className="text-green-400 font-medium">¡Acceso concedido!</p>}
                            </div>
                        </div>
                    </div>
                );
            }

            ReactDOM.render(<LoginScreen />, document.getElementById('root'));
        }
    </script>

</body>
</html>
